# Конфигурация Gran Publicador

Приложение Gran Publicador настраивается с помощью переменных окружения. Все параметры валидируются при запуске сервера.

## Список переменных окружения

| Переменная | Обязательная | Описание | Значение по умолчанию | Пример |
|------------|--------------|----------|-----------------------|--------|
| `NODE_ENV` | Нет | Режим работы приложения | `development` | `production` |
| `SERVER_HOST` | Нет | Хост для запуска сервера | `localhost` | `0.0.0.0` |
| `SERVER_PORT` | Нет | Порт для запуска сервера | `8080` | `8080` |
| `DATABASE_URL` | **Да** | Строка подключения к базе данных | - | `file:./db.db` |
| `JWT_SECRET` | **Да** | Секретный ключ для JWT токенов | - | `random-string` |
| `TELEGRAM_BOT_TOKEN` | **Да** | Токен Telegram бота | - | `123456:ABC...` |
| `NEWS_SERVICE_URL` | **Да** | URL микросервиса новостей | - | `http://news:8080/api/v1` |
| `NEWS_NOTIFICATION_INTERVAL_MINUTES` | Нет | Интервал уведомлений о новостях (мин) | `10` | `15` |
| `TZ` | Нет | Часовой пояс приложения | `UTC` | `Europe/Moscow` |
| `LOG_LEVEL` | Нет | Уровень логирования | `info` | `debug` |
| `SHUTDOWN_TIMEOUT_MS` | Нет | Таймаут принудительной остановки (мс) | `30000` | `30000` |

### Настройки планировщика (Scheduler)

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `SCHEDULER_INTERVAL_SECONDS` | Как часто (в сек) проверять наличие новых публикаций | `60` |
| `SCHEDULER_WINDOW_MINUTES` | "Окно" в минутах. Посты старше этого времени помечаются как `EXPIRED`. | `10` |

### Обработка постов

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `POST_PROCESSING_TIMEOUT_SECONDS` | Максимальное время (сек) на обработку одного поста внешним сервисом. | `30` |

### Новости (News Service)

| Переменная | Описание | По умолчанию |
|------------|----------|--------------|
| `NEWS_NOTIFICATION_INTERVAL_MINUTES` | Интервал в минутах между проверками новых новостей для уведомлений. | `10` |

## Файлы примеров

- `.env.development.example` - для локальной разработки
- `.env.production.example` - для продакшн окружения
